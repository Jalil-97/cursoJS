<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mi Finanzas App - Finanzas</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script src="../js/main.js" defer></script>
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <h1 class="logo">Mi Finanzas App</h1>
    <nav>
      <ul class="nav-links">
        <li><a href="../index.html">Inicio</a></li>
        <li><a href="./finanzas.html">Finanzas</a></li>
      </ul>
    </nav>
  </header>

  <!-- Tarjetas resumen -->
  <section class="cards">
    <div class="card">
      <h3>Saldo actual</h3>
      <p id="saldo">$0</p>
    </div>
    <div class="card">
      <h3>Ingresos</h3>
      <p id="ingresos">$0</p>
    </div>
    <div class="card">
      <h3>Gastos</h3>
      <p id="gastos">$0</p>
    </div>
  </section>

  <!-- Formulario -->
  <section class="form-movimiento">
    <h2 id="form-title">Agregar Movimiento</h2>
    <form id="form-movimiento">
      <input type="date" id="fecha" required />
      <select id="tipo" required>
        <option value="">-- Tipo --</option>
        <option value="ingreso">Ingreso</option>
        <option value="gasto">Gasto</option>
      </select>
      <select id="categoria" required>
        <option value="">-- Seleccioná categoría --</option>
        <option value="Sueldo">Sueldo</option>
        <option value="Venta">Venta</option>
        <option value="Ahorro">Ahorro</option>
        <option value="Alquiler">Alquiler</option>
        <option value="Servicios">Servicios</option>
        <option value="Comida">Comida</option>
        <option value="Supermercado">Supermercado</option>
        <option value="Transporte">Transporte</option>
        <option value="Combustible">Combustible</option>
        <option value="Salud">Salud</option>
        <option value="Farmacia">Farmacia</option>
        <option value="Educación">Educación</option>
        <option value="Ocio">Ocio</option>
        <option value="Restaurante">Restaurante</option>
        <option value="Tecnologia">Tecnología</option>
        <option value="Ropa">Ropa</option>
        <option value="Deudas">Deudas</option>
        <option value="Inversiones">Inversiones</option>
        <option value="Impuestos">Impuestos</option>
        <option value="Regalos">Regalos</option>
        <option value="Otros">Otros</option>
      </select>
      <input type="text" id="categoria-otros" placeholder="Aclarar categoría (solo si elegiste 'Otros')" style="display:none;" />
      <input type="number" id="monto" placeholder="Monto" required step="0.01" />
      <button type="submit" id="btn-submit" class="btn btn-primary">Agregar</button>
      <button type="button" id="btn-cancel-edit" class="btn btn-secondary" style="display:none;">Cancelar edición</button>
    </form>
  </section>

  <!-- Filtros -->
  <section class="filtros-card">
    <h3>Filtrar movimientos</h3>
    <div class="filtros-grid">
      <input type="text" id="filtro-texto" placeholder="Buscar por categoría o texto..." />
      <select id="filtro-categoria">
        <option value="">Todas las categorías</option>
        <option value="Sueldo">Sueldo</option>
        <option value="Venta">Venta</option>
        <option value="Ahorro">Ahorro</option>
        <option value="Alquiler">Alquiler</option>
        <option value="Servicios">Servicios</option>
        <option value="Comida">Comida</option>
        <option value="Supermercado">Supermercado</option>
        <option value="Transporte">Transporte</option>
        <option value="Combustible">Combustible</option>
        <option value="Salud">Salud</option>
        <option value="Farmacia">Farmacia</option>
        <option value="Educación">Educación</option>
        <option value="Ocio">Ocio</option>
        <option value="Restaurante">Restaurante</option>
        <option value="Tecnologia">Tecnología</option>
        <option value="Ropa">Ropa</option>
        <option value="Deudas">Deudas</option>
        <option value="Inversiones">Inversiones</option>
        <option value="Impuestos">Impuestos</option>
        <option value="Regalos">Regalos</option>
        <option value="Otros">Otros</option>
      </select>
      <input type="date" id="filtro-desde" />
      <input type="date" id="filtro-hasta" />
      <button id="btn-aplicar-filtro" class="btn btn-primary">Aplicar</button>
      <button id="btn-limpiar-filtro" class="btn btn-secondary">Limpiar</button>
    </div>
  </section>

  <!-- Tabla de movimientos -->
  <section class="tabla">
    <h2>Movimientos</h2>
    <div class="export-buttons">
      <button id="btn-export-excel" class="btn btn-primary">Exportar Excel</button>
      <button id="btn-export-pdf" class="btn btn-secondary">Exportar PDF</button>
    </div>
    <table id="tabla-movimientos">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Tipo</th>
          <th>Categoría</th>
          <th>Monto</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="lista-movimientos">
        <!-- dinámico con JS -->
      </tbody>
    </table>
  </section>

  <!-- Modal confirmación -->
  <div id="modal-confirm" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-modal-close></div>
    <div class="modal-content">
      <h3 id="modal-title">Confirmar eliminación</h3>
      <p id="modal-text">¿Querés eliminar este movimiento?</p>
      <div class="modal-actions">
        <button id="modal-cancel" class="btn btn-secondary">Cancelar</button>
        <button id="modal-confirm-btn" class="btn btn-danger">Eliminar</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>© 2025 Mi Finanzas App</p>
  </footer>
</body>

</html>
